# 5.前端工程化

>[webpack参考学习资料](https://juejin.cn/post/6844904094281236487#heading-0)

## 1.webpack构建流程

## 2.webpack、vite webpack插件机制，compile，compilation差别

- 1.vite是基于原生ES Moudel的，通常情况下vite构建速度会更快

- 2.vite热更新只更新修改的文件，而webpack可能是整个更新，vite的热更新通常也会比webpack快

- 3.webpack因为年限比较长，插件系统和社区支持比较好，vite相对而言还比较新，有些功能可能得自己去写一些插件，不过vite也已经慢慢的成熟了

**Compile 是一次性的**：`compile` 事件在编译器开始工作之前触发，通常只触发一次。

**Compilation 是多次性的**：每次文件改变导致重新构建时，都会触发一个新的 `compilation` 事件。

`compile` 主要关注配置和编译环境，而 `compilation` 关注具体的构建过程。

## 3.npm i 和npm i -save-dev和npm i -save

>npm -save是生产环境需要使用的模块。

>npm i -save-dev 是开发环境使用的模块。

## 4.dependencies和devDependencie之间的区别？

>dependencies是生产环境使用的依赖。

>devDependencie是开发环境使用的依赖。

## 5.package.json和package-lock.json的区别？

>package-lock.json文件锁定所有依赖版本号。包含你使用的所有包以及包依赖的信息。

>package.json文件记录项目中所需的模块。只包含当前使用的包，不包含当前使用包的依赖信息。

## 6.package.json中箭头和波浪号的区别？

>箭头会将当前版本的依赖更新到当前第2位数字的最新版本。

>波浪符号会更新小版本号也就是第3位的最新版本。

## 7.webpack热更新原理

## 8.loader plugin 原理

## 9.口述实现一个loader

## 10.webpack打包优化的方式？

>参考链接1：[常用的webpack优化方法](https://www.cnblogs.com/wangjiachen666/p/11561186.html#_label1_4)

>参考链接2：[深入浅出webpack](https://webpack.wuhaolin.cn/4%E4%BC%98%E5%8C%96/4-3%E4%BD%BF%E7%94%A8HappyPack.html)

>分为优化打包速度和优化打包后的体积。

>优化打包速度：1.优化Loader搜索范围。2.cache-loader缓存loader处理结果，只对性能开销较大的loader进行缓存。因为保存和读取这些缓存会有一些时间开销。3.使用多线程打包的方法。4.noParse：可以配置让webpack不去进行某些模块的解析。5.webpack-bundle-analyzer生成代码分析报告。

>优化打包体积：

>1.使用image-webpack-loader对图片进行压缩和优化。

>2.删除无用的CSS样式。使用purgecss-webpack-plugin插件

>3.以CDN的方式加载资源。使用add-asset-html-cdn-webpack-plugin插件。

>4.开启Tree Shaking。去除代码中的无用代码。

>7.按需加载。

## 11.Tree-Shaking、

>作用：用来删除掉没有用的代码。

>tree-shaking消除原理利用的是ES6的模块特性。

>ES6模块依赖关系是确定的，和运行时的状态无关，可以进行可靠的静态分析，这是tree-shaking的基础。

- 2.模块化机制？

>什么是模块？

>将代码分别封装成一个个的JS文件，然后通过对外暴露接口的方式进行数据共享，那么这样的单独的JS文件就是模块。

- 3.uglify？

>uglify原理：1.将代码转换为抽象语法树(AST) 2.将AST进行优化，生成一个更小的AST 3.将新生成的AST再转化为code。

>uglify压缩遵循一些uglify的压缩规则。

- 4.babel原理？

>babel核心处理流程：1.将源代码解析成AST 2.转换AST为需要的样子 3.打印AST为源码

>将ES6的代码转换为ES6以下版本可以运行的代码。

- 5.webpack工作流程？

>loader：能转换各类资源，并处理成对应模块的加载器。loader间可以串行使用。

>chunk：按需加载分块，可以装载不同的module。

>plugin：webpack插件

>1.初始化阶段：启动构建，读取与合并配置参数，加载plugin，实例化Complier。

>2.编译阶段：从Entry出发，针对每个Module串行调用对应的Loader去翻译文件的内容，再找到该Module依赖的Module，递归的进行编译处理。

>3.输出阶段：将编译后的Module组合成Chunk，将Chunk转换成文件，输出到文件系统中。

- 6.webpack plugin插件机制？

- 7.webpack中的loader机制？

- 8.webpack打包优化？

- 9.webpack如何配置？在项目中怎么配置？图片文件需要怎么配置？

- 10.webpack打包原理？

- 11.webpack热更新原理？

总结：面试相关必问知识点？

>1.webpack打包原理？

>首先将代码转成AST，其中首先使用parser将字符串代码转成AST，然后使用traverse收集依赖，然后使用transformFromAst将ES6转成ES5

>2.webpack配置相关？

>3.webpack性能优化相关？

>4.loader相关？

>5.plugin相关？

>6.babel相关？

>7.tree-shaking相关？

>带着相关问题再过一遍webpack4官方文档。带着相关问题然后再去学一下手写webpack。

