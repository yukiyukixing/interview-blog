# 3.浏览器

## 1.从输入URL到页面展示，这中间发生了什么？

- 1.本地缓存

首先当输入完URL，浏览器会根据这个url去查找本地缓存中是否有对应的资源，如果有的话就直接从缓存里获取对应的资源进行加载，没有就进行下一步。

- 2.DNS解析

当从本地缓存中没找到对应资源的时候，接下来就会进行DNS解析。浏览器首先需要知道该URL对应的IP地址。这是通过查询域名系统(DNS)来完成的。如果浏览器缓存或操作系统缓存中有此域的IP地址，则会直接使用；否则，它会发出一个DNS请求到DNS服务器。

- 3.建立TCP连接

找到输入的域名对应的IP地址后，浏览器与目标服务器会建立tcp连接。这涉及到一个三次握手过程。

- 4.发送HTTP请求

浏览器发送一个HTTP请求到服务器，请求指定的资源。
如果是HTTPS请求，还会涉及到TLS/SSL握手过程来加密通信内容。

- 5.服务器处理请求并返回HTTP响应

服务器处理来自浏览器的请求，这可能涉及到查询数据库、处理应用逻辑等。
服务器生成一个HTTP响应并发送回浏览器。

- 6.浏览器处理响应内容

浏览器开始解析服务器返回的HTML内容。
解析过程中，浏览器可能会发现需要额外资源（如CSS、JavaScript、图像等），这将触发额外的HTTP请求。

- 7.构建DOM树

浏览器开始解析HTML内容并构建DOM树。
因为浏览器无法直接理解和使用html，所以需要将html转换成浏览器能理解的结构————DOM树。

- 8.CSS处理和构建渲染树

并行于DOM树的构建，浏览器会解析CSS并与DOM结合，生成渲染树。
渲染树包含页面上要显示的所有元素及其样式信息。

- 9.JavaScript处理:

如果HTML中有JavaScript，它可能会通过DOM API或CSSOM API修改页面结构或样式。
JavaScript的执行可能会延迟渲染。

- 10.布局:

浏览器开始计算渲染树中每个节点在页面上的确切位置和大小。这个过程通常被称为“布局”或“重排”。

- 11.绘制:

根据渲染树和布局信息，浏览器开始绘制页面上的每个元素。这个过程被称为“绘制”或“重绘”。

- 12.显示完成的页面:

在所有必要的脚本都被执行并且所有的资源都被下载和渲染后，页面最终会在浏览器中完全显示出来。
