<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>8.3D</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/interview-blog/favicon.png">
    <script>
            (function(c,l,a,r,i,t,y){
                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
            })(window, document, "clarity", "script", "ld1lb1mxcw");
            </script>
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?026f112374d9fddc0a2aee0b2392bde9";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
            </script>
    <meta name="description" content="">
    
    <link rel="preload" href="/interview-blog/assets/css/0.styles.d354ebfa.css" as="style"><link rel="preload" href="/interview-blog/assets/js/app.589f58b2.js" as="script"><link rel="preload" href="/interview-blog/assets/js/2.fe87fc20.js" as="script"><link rel="preload" href="/interview-blog/assets/js/22.09280627.js" as="script"><link rel="prefetch" href="/interview-blog/assets/js/1.fe06c0c6.js"><link rel="prefetch" href="/interview-blog/assets/js/10.2c4226e7.js"><link rel="prefetch" href="/interview-blog/assets/js/11.35592479.js"><link rel="prefetch" href="/interview-blog/assets/js/12.f900037e.js"><link rel="prefetch" href="/interview-blog/assets/js/13.3b76afac.js"><link rel="prefetch" href="/interview-blog/assets/js/14.6154a0bc.js"><link rel="prefetch" href="/interview-blog/assets/js/15.7508c086.js"><link rel="prefetch" href="/interview-blog/assets/js/16.a6f42578.js"><link rel="prefetch" href="/interview-blog/assets/js/17.1b731afa.js"><link rel="prefetch" href="/interview-blog/assets/js/18.94d03c89.js"><link rel="prefetch" href="/interview-blog/assets/js/19.d9c7290e.js"><link rel="prefetch" href="/interview-blog/assets/js/20.94387ff1.js"><link rel="prefetch" href="/interview-blog/assets/js/21.e1b13055.js"><link rel="prefetch" href="/interview-blog/assets/js/23.b64df0d1.js"><link rel="prefetch" href="/interview-blog/assets/js/24.e5ee912e.js"><link rel="prefetch" href="/interview-blog/assets/js/25.3ac64ba5.js"><link rel="prefetch" href="/interview-blog/assets/js/26.b46bfa2c.js"><link rel="prefetch" href="/interview-blog/assets/js/27.2631c1a4.js"><link rel="prefetch" href="/interview-blog/assets/js/28.e4fec612.js"><link rel="prefetch" href="/interview-blog/assets/js/29.e7d2ab6d.js"><link rel="prefetch" href="/interview-blog/assets/js/3.7b480f43.js"><link rel="prefetch" href="/interview-blog/assets/js/30.d35e4f37.js"><link rel="prefetch" href="/interview-blog/assets/js/31.5a31f579.js"><link rel="prefetch" href="/interview-blog/assets/js/32.345c51a5.js"><link rel="prefetch" href="/interview-blog/assets/js/33.a9ce66e7.js"><link rel="prefetch" href="/interview-blog/assets/js/34.b981c40a.js"><link rel="prefetch" href="/interview-blog/assets/js/35.437b0cd8.js"><link rel="prefetch" href="/interview-blog/assets/js/36.d77f1a69.js"><link rel="prefetch" href="/interview-blog/assets/js/37.adae70a6.js"><link rel="prefetch" href="/interview-blog/assets/js/38.28e968ab.js"><link rel="prefetch" href="/interview-blog/assets/js/39.1d13afd9.js"><link rel="prefetch" href="/interview-blog/assets/js/4.53e8db53.js"><link rel="prefetch" href="/interview-blog/assets/js/40.24c6517f.js"><link rel="prefetch" href="/interview-blog/assets/js/41.21018e3a.js"><link rel="prefetch" href="/interview-blog/assets/js/5.2eae8d4b.js"><link rel="prefetch" href="/interview-blog/assets/js/6.31f9c63a.js"><link rel="prefetch" href="/interview-blog/assets/js/7.aefd9540.js"><link rel="prefetch" href="/interview-blog/assets/js/vendors~docsearch.bdc2fb18.js">
    <link rel="stylesheet" href="/interview-blog/assets/css/0.styles.d354ebfa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-navbar"><!----> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/interview-blog/" aria-current="page" class="sidebar-link">前言</a></li><li><a href="/interview-blog/简历与自我介绍.html" class="sidebar-link">简历与自我介绍</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/interview-blog/基础知识" class="sidebar-heading clickable open"><span>基础知识</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview-blog/base/JS.html" class="sidebar-link">1.JS</a></li><li><a href="/interview-blog/base/React.html" class="sidebar-link">2.React</a></li><li><a href="/interview-blog/base/前端工程化.html" class="sidebar-link">3.前端工程化</a></li><li><a href="/interview-blog/base/浏览器.html" class="sidebar-link">4.浏览器</a></li><li><a href="/interview-blog/base/CSS.html" class="sidebar-link">5.CSS</a></li><li><a href="/interview-blog/base/计算机原理.html" class="sidebar-link">6.计算机原理</a></li><li><a href="/interview-blog/base/微前端.html" class="sidebar-link">7.微前端</a></li><li><a href="/interview-blog/base/2D.html" class="sidebar-link">9.2D</a></li><li><a href="/interview-blog/base/3D.html" aria-current="page" class="active sidebar-link">8.3D</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview-blog/base/3D.html#_1-three-js-中点击拾取是怎么做的" class="sidebar-link">1.Three.js 中点击拾取是怎么做的</a></li><li class="sidebar-sub-header"><a href="/interview-blog/base/3D.html#_2-three-js性能优化" class="sidebar-link">2.Three.js性能优化</a></li><li class="sidebar-sub-header"><a href="/interview-blog/base/3D.html#_3-描述一下-three-js-的主要组成和工作原理" class="sidebar-link">3.描述一下 Three.js 的主要组成和工作原理</a></li><li class="sidebar-sub-header"><a href="/interview-blog/base/3D.html#_4-three-js与babylon-js对比" class="sidebar-link">4.Three.js与Babylon.js对比</a></li><li class="sidebar-sub-header"><a href="/interview-blog/base/3D.html#_5-点和直线的对称点" class="sidebar-link">5.点和直线的对称点</a></li><li class="sidebar-sub-header"><a href="/interview-blog/base/3D.html#_6-判断点是否在一个多边形内" class="sidebar-link">6.判断点是否在一个多边形内</a></li><li class="sidebar-sub-header"><a href="/interview-blog/base/3D.html#_7-矩阵的乘法" class="sidebar-link">7.矩阵的乘法</a></li><li class="sidebar-sub-header"><a href="/interview-blog/base/3D.html#webgl" class="sidebar-link">webgl</a></li><li class="sidebar-sub-header"><a href="/interview-blog/base/3D.html#shader" class="sidebar-link">shader</a></li></ul></li><li><a href="/interview-blog/base/算法.html" class="sidebar-link">10.算法</a></li><li><a href="/interview-blog/base/场景题.html" class="sidebar-link">11.场景题</a></li></ul></section></li><li><a href="/interview-blog/项目.html" class="sidebar-link">项目</a></li><li><a href="/interview-blog/面经.html" class="sidebar-link">面经</a></li><li><a href="/interview-blog/面试复盘.html" class="sidebar-link">面试复盘</a></li><li><a href="/interview-blog/经验总结.html" class="sidebar-link">经验总结</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_8-3d"><a href="#_8-3d" class="header-anchor">#</a> 8.3D</h1> <blockquote><p><a href="https://threejs.org/docs/index.html#manual/zh/introduction/Creating-a-scene" target="_blank" rel="noopener noreferrer">three.js官网文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="_1-three-js-中点击拾取是怎么做的"><a href="#_1-three-js-中点击拾取是怎么做的" class="header-anchor">#</a> 1.Three.js 中点击拾取是怎么做的</h2> <p>Three.js 中点击拾取是通过射线投射去做的。</p> <ul><li>1.创建一个 Raycaster 对象和一个用于存储鼠标位置的二维向量。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 初始化射线投射器和鼠标向量</span>
raycaster <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Raycaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mouse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>2.转换鼠标位置：当用户点击屏幕时，需要将鼠标的屏幕坐标转换为 Three.js 使用的标准化设备坐标（NDC）。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>mouse<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientX <span class="token operator">/</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
mouse<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientY <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>3.检测物体和射线的交集：在用户点击事件的处理函数中，使用射线投射器来检测与场景中物体的交集。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 更新射线投射方向</span>
raycaster<span class="token punctuation">.</span><span class="token function">setFromCamera</span><span class="token punctuation">(</span>mouse<span class="token punctuation">,</span> camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取射线和物体的交集</span>
<span class="token keyword">const</span> intersects <span class="token operator">=</span> raycaster<span class="token punctuation">.</span><span class="token function">intersectObject</span><span class="token punctuation">(</span>cubes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>4.处理选中的物体：在 intersects 数组中，你会得到所有与射线相交的物体。这个数组是按距离摄像机从近到远排序的，所以 intersects[0] 是最近的物体。你可以在这里添加自己的逻辑来处理这些物体，比如更改它们的颜色、显示信息标签等。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 还原所有线框立方体的颜色</span>
cubes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0x00ff00</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>intersects<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 改变选中线框立方体的颜色</span>
    intersects<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>object<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-three-js性能优化"><a href="#_2-three-js性能优化" class="header-anchor">#</a> 2.Three.js性能优化</h2> <ul><li><p>1.只渲染相机视角内的物体。</p></li> <li><p>2.优化几何体或模型本身，通过建模软件或者通过合并几何体减少三角面的数量和顶点的数量。</p></li> <li><p>3.不同层级加载不同精度的模型或几何体（Lod）。</p></li> <li><p>4.使用webworker多线程做一些解析和复杂计算的工作</p></li> <li><p>5.利用 Instancing，当需要渲染大量相同对象（变换可以不同，位置，旋转，缩放可以不同）时，使用 instancing 可以大幅提高性能。这个其实是优化了数据从CPU传输到GPU的数据量与传输的次数。</p></li></ul> <h2 id="_3-描述一下-three-js-的主要组成和工作原理"><a href="#_3-描述一下-three-js-的主要组成和工作原理" class="header-anchor">#</a> 3.描述一下 Three.js 的主要组成和工作原理</h2> <p>Three.js是一个基于webgl封装的3D可视化的图形库。</p> <ul><li><ol><li>主要组成:</li></ol></li> <li><p>1.场景（Scene）: 一个场景代表了一个3D的空间，里面包含了物体、光源等元素。想象它就像一个3D的舞台。</p></li> <li><p>2.相机（Camera）: 相机定义了从哪个视角查看场景。Three.js 提供了多种相机，如正交相机（OrthographicCamera）和透视相机（PerspectiveCamera）。</p></li> <li><p>3.物体（Objects）: 在 Three.js 中，一个物体通常由几何体（Geometry）和材料（Material）组成。几何体定义了物体的形状，而材料定义了物体的表面特性，如颜色、纹理等。</p></li> <li><p>4.光源（Lights）: 光源影响场景中物体的明暗和颜色。Three.js 提供了多种光源，如点光源（PointLight）、方向光（DirectionalLight）、聚光灯（SpotLight）等。</p></li> <li><p>5.渲染器（Renderer）: 负责将场景和相机的信息转化为像素，从而在屏幕上显示3D图像。WebGLRenderer 是 Three.js 中最常用的渲染器，基于 WebGL 实现。</p></li> <li><p>6.动画和交互: Three.js 提供了动画系统和射线投影（Raycasting）等工具来支持动画和交互。</p></li> <li><ol start="2"><li>工作原理:</li></ol></li> <li><p>1.初始化: 创建场景、相机、渲染器等基础组件。</p></li> <li><p>2.添加内容: 将物体、光源等添加到场景中。</p></li> <li><p>3.渲染循环: 在动画或交互期间，渲染器会不断地重新绘制场景。</p></li> <li><p>4.渲染器使用场景和相机的数据，通过 WebGL API 绘制每一帧。</p></li> <li><p>5.若有动画或交互，场景中的物体可能会移动或变形，需要在每一帧中更新。</p></li> <li><p>6.交互: 通过监听事件和射线投影检测用户的交互操作。</p></li> <li><p>7.动画: 使用 Three.js 的动画系统或请求动画帧（requestAnimationFrame）来更新场景中物体的状态。</p></li></ul> <h2 id="_4-three-js与babylon-js对比"><a href="#_4-three-js与babylon-js对比" class="header-anchor">#</a> 4.Three.js与Babylon.js对比</h2> <h3 id="_1-性能"><a href="#_1-性能" class="header-anchor">#</a> 1.性能</h3> <ul><li>大型场景中Babylon.js提供的性能可能会比Three更好</li></ul> <h3 id="_2-功能"><a href="#_2-功能" class="header-anchor">#</a> 2.功能</h3> <ul><li>Babylon.js拥有更多的内置功能和高级功能</li></ul> <h3 id="_3-适用场景"><a href="#_3-适用场景" class="header-anchor">#</a> 3.适用场景</h3> <ul><li>Babylon.js可能更适用于复杂的场景和游戏开发，而Three.js更适合小型或中型的项目开发。</li></ul> <h2 id="_5-点和直线的对称点"><a href="#_5-点和直线的对称点" class="header-anchor">#</a> 5.点和直线的对称点</h2> <ul><li><p>1.做垂线，知道了一个在直线上的点</p></li> <li><p>2.然后这条垂线的斜率也是已知的</p></li> <li><p>3.通过直线上的一个点和斜率可以列两个方程，求出对称点。</p></li></ul> <blockquote><p>向量的方法：</p></blockquote> <p><img src="/interview-blog/assets/img/vector.a20d3b50.png" alt="vector.png"></p> <h2 id="_6-判断点是否在一个多边形内"><a href="#_6-判断点是否在一个多边形内" class="header-anchor">#</a> 6.判断点是否在一个多边形内</h2> <ul><li><p>1.从点 P 向任意方向发出一条射线</p></li> <li><p>2.计算射线与多边形边界的交点数量。</p></li> <li><p>3.如果交点数量是奇数，那么点 P 在多边形内；如果是偶数，点 P 在多边形外。</p></li></ul> <h2 id="_7-矩阵的乘法"><a href="#_7-矩阵的乘法" class="header-anchor">#</a> 7.矩阵的乘法</h2> <ul><li><p>1.两个矩阵相乘，前提是第一个矩阵的列数等于第二个矩阵的行数。</p></li> <li><p>2.得到的矩阵的每一项等于第一个矩阵的行数乘以第二个矩阵的列数。</p></li></ul> <h2 id="webgl"><a href="#webgl" class="header-anchor">#</a> webgl</h2> <h2 id="shader"><a href="#shader" class="header-anchor">#</a> shader</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/interview-blog/base/2D.html" class="prev">
        9.2D
      </a></span> <span class="next"><a href="/interview-blog/base/算法.html">
        10.算法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/interview-blog/assets/js/app.589f58b2.js" defer></script><script src="/interview-blog/assets/js/2.fe87fc20.js" defer></script><script src="/interview-blog/assets/js/22.09280627.js" defer></script>
  </body>
</html>
